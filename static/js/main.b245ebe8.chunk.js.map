{"version":3,"sources":["PrettoSlider.tsx","TextWithPopover.tsx","InputParams.tsx","parametersDescriptions.ts","CurveDesignInputParams.tsx","HelpText.tsx","InputParamBig.tsx","SimulationInputParams.tsx","utils.ts","math.ts","SupplyVsDemandChart.tsx","DotsLoader.tsx","ResultParams.tsx","PriceSimulationChart.tsx","u_values.tsx","App.tsx","theme.tsx","index.tsx"],"names":["withStyles","root","height","color","thumb","width","backgroundColor","border","marginTop","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","background","rail","markLabel","top","Slider","useStyles","makeStyles","theme","container","display","fontSize","cursor","transition","popoverContainer","padding","spacing","paddingBottom","marginBottom","borderBottom","paper","maxWidth","breakpoints","values","md","descriptionBody","TextWithPopover","content","popoverText","classes","React","useState","anchorEl","setAnchorEl","handleClose","open","Boolean","id","undefined","className","aria-describedby","onClick","event","currentTarget","Typography","Popover","PaperProps","onClose","anchorOrigin","vertical","horizontal","transformOrigin","Box","createStyles","margin","lightBulb","verticalAlign","marginRight","leftContainer","palette","text","secondary","centerContainer","listBoxContainer","listBox","alignItems","paddingRight","slider","primary","main","inputValue","NumberFormatCustom","props","inputRef","onChange","prefix","suffix","other","getInputRef","onValueChange","target","value","thousandSeparator","InputParams","inputFields","onChangeCommited","map","label","description","setter","min","max","step","format","toText","toNum","sanitizeInput","num","isNaN","Grid","key","item","xs","TextField","e","parseFloat","InputProps","inputComponent","disableUnderline","inputProps","PrettoSlider","valueLabelDisplay","aria-label","defaultValue","_","newValue","Number","onChangeCommitted","valueLabelFormat","replace","parameterDescriptions","theta","name","p0","p1","wFee","vHalflife","d0","supplyVsDemandChartDescription","simulationChartDescription","simulationParameterDescriptions","price","floorPrice","totalRaised","resultParameterDescriptions","totalReserve","slippage","initialHatchFunds","exitTributes","CurveDesignInputParams","curveParams","setCurveParams","setTheta","setP0","setP1","setWFee","setVHalflife","useEffect","maxReturnRate","minP1P0Rate","n","Math","round","String","toFixed","newP0","parseInt","params","opacity","descriptionContainer","descriptionTitle","descriptionPadding","SimplePopover","title","table","body","InputParamBig","sm","lg","variant","SimulationInputParams","setD0","floor","linspace","from","to","steps","arr","x","push","getLinspaceTicks","data","desiredPoints","length","getLast","a","getAvg","reduce","t","c","abs","pause","ms","Promise","r","setTimeout","getUnits","biggestNum","scaling","unit","getInitialParams","k","R0","S0","V0","getR","S","getS","R","getMinPrice","H","myP","getPriceR","getSlippage","deltaR","realizedPrice","spotPrice","getDeltaR_priceGrowth","priceGrowth","getTxDistribution","sum","mean","off","spread","i","randn_bm","vest_tokens","week","halflife","cliff","rv_U","random","u","v","sqrt","log","cos","PI","getMedian","mid","nums","sort","b","isAnimationActive","keyHorizontal","keyVertical","referenceLineColor","tooltip","SupplyVsDemandChart","R0_round","f","useTheme","formatter","toPrecision","toLocaleString","debounce","right","bottom","stroke","strokeOpacity","interval","dataKey","tickFormatter","tick","fill","ticks","d","domain","payload","supply","reserve","toolTipData","_unit","type","fillOpacity","strokeWidth","y","strokeDasharray","textAnchor","viewBox","style","DotsLoader","valueFooter","ResultParams","resultFields","simulationDuration","process","setIsAnimationActive","timeout","clearTimeout","keyVerticalLeft","keyVerticalLeft2","keyVerticalRight","p1LineText","p0LineText","yLeftColor","PriceSimulationChart","priceTimeseries","totalFundsRaisedTimeseries","floorpriceTimeseries","totalFundsMin","totalFundsMax","slice","totalFundsRange","daiFormatter","fundsFormatterShort","ReferenceLabel","yAxisId","orientation","funds","weekNum","animationDuration","u_min_t","u_max_t","mainContainer","paddingTop","simulationContainer","minHeight","box","boxButton","boxHeader","boxHeaderWithoutBoder","boxHeaderTitle","boxBorderBottom","initialRaise","justifyContent","boxChart","maxHeight","paddingLeft","boxPlaceholder","header","textAlign","button","textTransform","hatchRaiseBox","d0Container","d0Number","d0Slidder","createMuiTheme","light","dark","error","red","A400","default","typography","h6","fontWeight","console","ReactDOM","render","ThemeProvider","CssBaseline","setCurveParamsThrottle","useMemo","throttle","setPriceTimeseries","withdrawFeeTimeseries","setWithdrawFeeTimeseries","setFloorpriceTimeseries","setTotalReserve","withdrawCount","setWithdrawCount","avgSlippage","setAvgSlippage","avgTxSize","setAvgTxSize","simulationActive","setSimulationActive","simulationRunning","setSimulationRunning","clearSimulation","canContinueSimulation","R_t","S_t","p_t","wFee_t","slippage_t","avgTxSize_t","H_t","floorprice_t","numSteps","txsWeek","R_next","S_next","H_next","price_next","txsWithdraw","floorprice_next","u_lower","u_upper","txs","txR","filter","tx","_avgTxSize","wFees","simulateRandomDelta","totalInitialHatchFunds","totalExitTributes","totalFunds","formatFunds","Container","fixed","Paper","direction","justify","Button","disabled","Object","document","querySelector"],"mappings":"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","file":"static/js/main.b245ebe8.chunk.js","sourcesContent":["import { withStyles } from \"@material-ui/core/styles\";\nimport Slider from \"@material-ui/core/Slider\";\n\nexport default withStyles({\n  root: {\n    height: 8,\n    color: \"#00E046\",\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: \"#fff\",\n    border: \"2px solid #004C07\",\n    marginTop: -8,\n    marginLeft: -12,\n    \"&:focus,&:hover,&$active\": {\n      boxShadow: \"inherit\",\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: \"calc(-50% + 4px)\",\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n    background: \"#00E046\",\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n  markLabel: {\n    top: 30,\n  },\n})(Slider);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    color: \"#00A52D\",\n    display: \"flex\",\n    fontSize: \"0.9rem\",\n    cursor: \"pointer\",\n    transition: \"color ease 150ms\",\n    \"&:hover\": {\n      color: \"#00E046\",\n    },\n  },\n  popoverContainer: {\n    padding: theme.spacing(2),\n    \"& > p:not(:last-child)\": {\n      color: \"#00E046\",\n      paddingBottom: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n      borderBottom: \"1px solid #006a13\",\n    },\n  },\n  paper: {\n    backgroundColor: \"#006609\",\n    maxWidth: theme.breakpoints.values.md * 0.9,\n    [`@media screen and (max-width: ${theme.breakpoints.values.md}px)`]: {\n      maxWidth: \"90vw\",\n    },\n    padding: theme.spacing(0.5),\n  },\n  descriptionBody: {\n    color: \"#00A52D\",\n  },\n}));\n\nexport default function TextWithPopover({\n  content,\n  popoverText,\n}: {\n  content: string;\n  popoverText: string;\n}) {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  function handleClick(event: any) {\n    setAnchorEl(event.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <div className={classes.container}>\n      <div aria-describedby={id} onClick={handleClick}>\n        <Typography>{content}</Typography>\n      </div>\n      <Popover\n        PaperProps={{\n          className: classes.paper,\n        }}\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        onClick={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Box className={classes.popoverContainer}>\n          <Typography>{content}</Typography>\n          <Typography className={classes.descriptionBody}>\n            {popoverText}\n          </Typography>\n        </Box>\n      </Popover>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport NumberFormat from \"react-number-format\";\nimport { InputFieldInterface } from \"./types\";\nimport PrettoSlider from \"./PrettoSlider\";\nimport TextWithPopover from \"./TextWithPopover\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      margin: theme.spacing(6, 0, 3),\n    },\n    lightBulb: {\n      verticalAlign: \"middle\",\n      marginRight: theme.spacing(1),\n    },\n    leftContainer: {\n      color: theme.palette.text.secondary,\n    },\n    centerContainer: {\n      // color: blackColor\n    },\n    listBoxContainer: {\n      \"& > div:not(:last-child)\": {\n        paddingBottom: \"12px\",\n        marginBottom: \"12px\",\n        borderBottom: \"1px solid #006a13\",\n      },\n    },\n    listBox: {\n      \"& > div\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& p\": {\n          marginBottom: 0,\n        },\n      },\n      \"& > div:not(:last-child)\": {\n        paddingRight: \"12px\",\n      },\n    },\n    slider: {\n      color: theme.palette.primary.main,\n    },\n    inputValue: {\n      color: \"#00E046\",\n    },\n  })\n);\n\nfunction NumberFormatCustom(props: any) {\n  const { inputRef, onChange, prefix, suffix, ...other } = props;\n\n  return (\n    <NumberFormat\n      {...other}\n      getInputRef={inputRef}\n      onValueChange={(values) => {\n        onChange({ target: { value: values.value } });\n      }}\n      thousandSeparator\n      prefix={prefix}\n      suffix={suffix}\n    />\n  );\n}\n\nexport default function InputParams({\n  inputFields,\n  onChangeCommited,\n}: {\n  inputFields: InputFieldInterface[];\n  onChangeCommited(): void;\n}) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.listBoxContainer}>\n      {inputFields.map(\n        ({\n          label,\n          description,\n          value,\n          setter,\n          min,\n          max,\n          step,\n          prefix,\n          suffix,\n          format,\n          toText,\n          toNum,\n        }) => {\n          function sanitizeInput(num: number = 0) {\n            if (isNaN(num)) num = 0;\n            if (num > max) num = max;\n            else if (num < min) num = min;\n            setter(num);\n          }\n\n          return (\n            <Grid key={label} container spacing={0} className={classes.listBox}>\n              <Grid item xs={6} className={classes.leftContainer}>\n                <TextWithPopover content={label} popoverText={description} />\n              </Grid>\n\n              <Grid item xs={2} className={classes.centerContainer}>\n                <TextField\n                  onChange={(e) => {\n                    sanitizeInput(\n                      toNum ? toNum(e.target.value) : parseFloat(e.target.value)\n                    );\n                    onChangeCommited();\n                  }}\n                  InputProps={{\n                    inputComponent: NumberFormatCustom,\n                    disableUnderline: true,\n                    className: classes.inputValue,\n                    inputProps: {\n                      prefix,\n                      suffix,\n                    },\n                  }}\n                  value={toText ? toText(value) : value}\n                />\n              </Grid>\n\n              <Grid item xs={4}>\n                <PrettoSlider\n                  className={classes.slider}\n                  valueLabelDisplay=\"auto\"\n                  aria-label={label}\n                  defaultValue={value}\n                  onChange={(_, newValue) => sanitizeInput(Number(newValue))}\n                  onChangeCommitted={onChangeCommited}\n                  value={value}\n                  min={min}\n                  max={max}\n                  step={step}\n                  valueLabelFormat={(value) => format(value).replace(\"$\", \"\")}\n                />\n              </Grid>\n            </Grid>\n          );\n        }\n      )}\n    </div>\n  );\n}\n","export interface DescriptionObject {\n  [key: string]: { name: string; text: string };\n}\n\nexport const parameterDescriptions: DescriptionObject = {\n  theta: {\n    name: \"Commons Tribute\",\n    text:\n      \"The percentage of the funds raised during the Hatch that goes directly to Funding Pool to be used to support the Commons' mission, the rest goes to the collateral pool\"\n  },\n  p0: {\n    name: \"Hatch price\",\n    text: \"The price paid per token by when hatching the Commons\"\n  },\n  p1: {\n    name: \"Open price\",\n    text:\n      \"The price per token at the launch of the Commons when the curve is set and anyone can join with the Commons\"\n  },\n  wFee: {\n    name: \"Exit Tribute\",\n    text:\n      \"The percentage that goes to the Funding Pool when token holders 'sell' by burning their token at the price determined by the ABC. If the Exit Tribute is 10% and the price is 1 DAI/token then, for every token burned, the exiting token holder would get 0.9 Dai and the Funding Pool would get 0.1 Dai\"\n  },\n  vHalflife: {\n    name: \"Lockup Curve\",\n    text:\n      \"Tokens that are purchased during the Hatch are locked initially and then released slowly such that 50% of the tokens will be able to be sold after the locking period + this many weeks and 87.5% of the tokens after 3x this many weeks + the locking period. In this demo the locking period is 7 weeks\"\n  },\n  d0: {\n    name: \"Hatch Raise\",\n    text: \"Amount of funds initially contributed before the launch of the Commons, this variable helps shape the curve\"\n  }\n};\n\nexport const supplyVsDemandChartDescription =\n  \"Visualization of the bonding curve up to 4x the initial size of the Collateral Pool Post-Hatch. This result is deterministic given the parameters set. It will not change regardless of the campaign's performance, it simply shows how the price will react to changes in the Collateral Pool.\";\n\nexport const simulationChartDescription =\n  \"This chart shows a 52 week simulation of discrete transactions interacting with the Augmented Bonding Curve. Each transaction adds to or subtracts collateral from the system, modifying the price over time. The frequency, size and direction of each transaction is computed from a set of bounded random functions. This is a NOT a cadCAD simulation, but it showcases the intention behind cadCAD.\";\n\nexport const simulationParameterDescriptions: DescriptionObject = {\n  price: {\n    name: \"Price\",\n    text: \"Price of the token over time.\"\n  },\n  floorPrice: {\n    name: \"Lockup Curve\",\n    text:\n      \"Lower bound of the price guaranteed by the Lockup Curve. It decreases over time as the tokens received by Hatchers are unlocked\"\n  },\n  totalRaised: {\n    name: \"Total funds raised\",\n    text: \"Cumulative sum of the funds sent to the Funding Pool\"\n  }\n};\n\nexport const resultParameterDescriptions: DescriptionObject = {\n  totalReserve: {\n    name: \"Collateral Pool balance\",\n    text: \"Total Dai in the collateral pool at the end of the simulated period\"\n  },\n  slippage: {\n    name: \"Median slippage\",\n    text:\n      \"Median of change in price a user experiences from the current price of one token to the price actually received when minting or burning many tokens\"\n  },\n  initialHatchFunds: {\n    name: \"Funds generated from Commons Tribute\",\n    text: \"Funds raised during the Hatch that go directly to the Funding Pool\"\n  },\n  exitTributes: {\n    name: \"Funds generated from Exit Tributes\",\n    text:\n      \"Cumulative sum of Exit Tributes collected from tokens that are burned\"\n  },\n  totalRaised: {\n    name: \"Total funds raised for your community\",\n    text: \"Sum of funds from the Commons Tribute + funds from Exit Tributes\"\n  }\n};\n","import React, { useState, useEffect } from \"react\";\nimport { InputFieldInterface, CurveParamsInterface } from \"./types\";\nimport InputParams from \"./InputParams\";\nimport { parameterDescriptions } from \"./parametersDescriptions\";\n\nexport default function CurveDesignInputParams({\n  curveParams,\n  setCurveParams\n}: {\n  curveParams: CurveParamsInterface;\n  setCurveParams(newCurveParams: any): void;\n}) {\n  const [theta, setTheta] = useState(curveParams.theta); // fraction allocated to reserve (.)\n  const [p0, setP0] = useState(curveParams.p0); // Hatch sale Price p0 (DAI / token)\n  const [p1, setP1] = useState(curveParams.p1); // Return factor (.)\n  const [wFee, setWFee] = useState(curveParams.wFee); // friction coefficient (.)\n  const [vHalflife, setVHalflife] = useState(curveParams.vHalflife); // friction coefficient (.)\n\n  useEffect(() => {\n    setTheta(curveParams.theta);\n    setP0(curveParams.p0);\n    setP1(curveParams.p1);\n    setWFee(curveParams.wFee);\n    setVHalflife(curveParams.vHalflife);\n  }, [curveParams]);\n\n  const maxReturnRate = 10;\n  const minP1P0Rate = 1.5;\n\n  function _setP0(newP0: number) {\n    setP0(newP0);\n    if (p1 < newP0 * minP1P0Rate) setP1(newP0 * minP1P0Rate);\n    else if (p1 > newP0 * maxReturnRate) setP1(newP0 * maxReturnRate);\n  }\n\n  function setParentCurveParams() {\n    setCurveParams((params: CurveParamsInterface) => ({\n      ...params,\n      theta,\n      p0,\n      p1,\n      wFee,\n      vHalflife\n    }));\n  }\n\n  const inputFields: InputFieldInterface[] = [\n    {\n      label: parameterDescriptions.theta.name,\n      description: parameterDescriptions.theta.text,\n      value: theta,\n      setter: setTheta,\n      min: 0,\n      max: 0.9,\n      step: 0.01,\n      suffix: \"%\",\n      format: (n: number) => `${Math.round(100 * n)}%`,\n      toText: (n: number) => String(+(n * 1e2).toFixed(0)),\n      toNum: (n: string) => parseFloat(n) * 1e-2\n    },\n    {\n      label: `${parameterDescriptions.p0.name} (DAI/token)`,\n      description: parameterDescriptions.p0.text,\n      value: p0,\n      setter: _setP0,\n      min: 0.01,\n      max: 1,\n      step: 0.01,\n      toText: (n: number) => String(+n.toFixed(2)),\n      toNum: (n: string) => parseFloat(n),\n      format: (n: number) => `$${n}`\n    },\n    {\n      label: `${parameterDescriptions.p1.name} (DAI/token)`,\n      description: parameterDescriptions.p1.text,\n      value: p1,\n      setter: setP1,\n      min: Number((minP1P0Rate * (p0 || 0.1)).toFixed(2)),\n      max: Number((maxReturnRate * p0).toFixed(2)),\n      step: 0.01,\n      toText: (n: number) => String(+n.toFixed(2)),\n      toNum: (n: string) => parseFloat(n),\n      format: (n: number) => `$${n}`\n    },\n    {\n      label: parameterDescriptions.wFee.name,\n      description: parameterDescriptions.wFee.text,\n      value: wFee,\n      setter: setWFee,\n      min: 0,\n      max: 0.1,\n      step: 0.001,\n      suffix: \"%\",\n      format: (n: number) => `${+(100 * n).toFixed(1)}%`,\n      toText: (n: number) => String(+(n * 1e2).toFixed(1)),\n      toNum: (n: string) => parseFloat(n) * 1e-2\n    },\n    {\n      label: `${parameterDescriptions.vHalflife.name} (weeks)`,\n      description: parameterDescriptions.vHalflife.text,\n      value: vHalflife,\n      setter: setVHalflife,\n      min: 1,\n      max: 52 * 2,\n      step: 1,\n      suffix: \"\",\n      format: (n: number) => String(Math.round(n)),\n      toText: (n: number) => String(Math.round(n)),\n      toNum: (n: string) => Math.round(parseInt(n))\n    }\n  ];\n\n  return (\n    <InputParams\n      inputFields={inputFields}\n      onChangeCommited={setParentCurveParams}\n    />\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport HelpIcon from \"@material-ui/icons/HelpOutline\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    marginLeft: \"6px\",\n    fontSize: \"0.9rem\",\n    cursor: \"pointer\",\n    transition: \"opacity ease 150ms\",\n    opacity: 0.2,\n    \"&:hover\": {\n      opacity: 0.85,\n    },\n  },\n  popoverContainer: {\n    background: \"#006609\",\n    padding: theme.spacing(2),\n  },\n  paper: {\n    backgroundColor: \"#384b59\",\n    maxWidth: theme.breakpoints.values.md * 0.9,\n    [`@media screen and (max-width: ${theme.breakpoints.values.md}px)`]: {\n      maxWidth: \"90vw\",\n    },\n  },\n  // Descriptions\n  descriptionContainer: {\n    \"& > div:not(:last-child)\": {\n      paddingBottom: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n      borderBottom: \"1px solid #006a13\",\n    },\n    \"& td\": {\n      verticalAlign: \"top\",\n      padding: theme.spacing(0.5),\n    },\n  },\n  descriptionTitle: {\n    color: \"#00E046\",\n    padding: theme.spacing(0.5),\n  },\n  descriptionBody: {\n    color: \"#00E046\",\n    padding: theme.spacing(0.5),\n  },\n  descriptionPadding: {\n    padding: theme.spacing(0.5),\n  },\n}));\n\nexport default function SimplePopover({\n  text,\n  title,\n  table,\n  body,\n}: {\n  text?: any;\n  title?: string;\n  table?: { name: string; text: string }[];\n  body?: string;\n}) {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  function handleClick(e: any) {\n    setAnchorEl(e.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <div className={classes.container}>\n      <HelpIcon onClick={handleClick} />\n\n      <Popover\n        PaperProps={{\n          className: classes.paper,\n        }}\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        onClick={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Box className={classes.popoverContainer}>\n          <div className={classes.descriptionContainer}>\n            {title && (\n              <div>\n                <Typography className={classes.descriptionTitle}>\n                  {title}\n                </Typography>\n              </div>\n            )}\n\n            {body && (\n              <div>\n                <Typography className={classes.descriptionBody}>\n                  {body}\n                </Typography>\n              </div>\n            )}\n\n            {table && (\n              <div>\n                <table>\n                  <tbody>\n                    {table.map(({ name, text }) => (\n                      <tr key={name}>\n                        <td>\n                          <Typography className={classes.descriptionBody}>\n                            {name}\n                          </Typography>\n                        </td>\n                        <td>\n                          <Typography className={classes.descriptionBody}>\n                            {text}\n                          </Typography>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n\n            {text}\n          </div>\n        </Box>\n      </Popover>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport NumberFormat from \"react-number-format\";\nimport { InputFieldInterface } from \"./types\";\nimport PrettoSlider from \"./PrettoSlider\";\nimport HelpText from \"./HelpText\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      margin: theme.spacing(6, 0, 3),\n    },\n    lightBulb: {\n      verticalAlign: \"middle\",\n      marginRight: theme.spacing(1),\n    },\n    leftContainer: {\n      // color: theme.palette.text.secondary\n    },\n    centerContainer: {\n      // color: blackColor\n    },\n    listBoxContainer: {\n      \"& > div:not(:last-child)\": {\n        paddingBottom: \"12px\",\n        marginBottom: \"12px\",\n        borderBottom: \"1px solid #313d47\",\n      },\n    },\n    listBox: {\n      \"& > div\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& p\": {\n          marginBottom: 0,\n        },\n      },\n      \"& > div:not(:last-child)\": {\n        paddingRight: \"12px\",\n      },\n    },\n    slider: {\n      color: theme.palette.primary.main,\n    },\n    label: {\n      color: \"#00E046\",\n    },\n  })\n);\n\nfunction NumberFormatCustom(props: any) {\n  const { inputRef, onChange, prefix, suffix, ...other } = props;\n\n  return (\n    <NumberFormat\n      {...other}\n      getInputRef={inputRef}\n      onValueChange={(values) => {\n        onChange({ target: { value: values.value } });\n      }}\n      thousandSeparator\n      prefix={prefix}\n      suffix={suffix}\n    />\n  );\n}\n\nexport default function InputParamBig({\n  inputFields,\n  onChangeCommited,\n}: {\n  inputFields: InputFieldInterface[];\n  onChangeCommited(): void;\n}) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.listBoxContainer}>\n      {inputFields.map(\n        ({\n          label,\n          description,\n          value,\n          setter,\n          min,\n          max,\n          step,\n          prefix,\n          suffix,\n          format,\n          toText,\n          toNum,\n        }) => {\n          function sanitizeInput(num: number = 0) {\n            if (isNaN(num)) num = 0;\n            if (num > max) num = max;\n            else if (num < min) num = min;\n            setter(num);\n          }\n\n          return (\n            <Grid key={label} container spacing={0} className={classes.listBox}>\n              <Grid\n                item\n                xs={6}\n                sm={6}\n                md={3}\n                lg={2}\n                className={classes.leftContainer}\n              >\n                <Typography className={classes.label} variant=\"h6\">\n                  {label}\n                </Typography>\n                <HelpText title={label} body={description} />\n              </Grid>\n\n              <Grid\n                item\n                xs={2}\n                sm={2}\n                md={1}\n                className={classes.centerContainer}\n              >\n                <TextField\n                  onChange={(e) => {\n                    sanitizeInput(\n                      toNum ? toNum(e.target.value) : parseFloat(e.target.value)\n                    );\n                    onChangeCommited();\n                  }}\n                  InputProps={{\n                    inputComponent: NumberFormatCustom,\n                    disableUnderline: true,\n                    className: classes.label,\n                    inputProps: {\n                      prefix,\n                      suffix,\n                    },\n                  }}\n                  value={toText ? toText(value) : value}\n                />\n              </Grid>\n\n              <Grid item xs={4} sm={4} md={8} lg={9}>\n                <PrettoSlider\n                  className={classes.slider}\n                  valueLabelDisplay=\"auto\"\n                  aria-label={label}\n                  defaultValue={value}\n                  onChange={(_, newValue) => sanitizeInput(Number(newValue))}\n                  onChangeCommitted={onChangeCommited}\n                  value={value}\n                  min={min}\n                  max={max}\n                  step={step}\n                  valueLabelFormat={(value) => format(value).replace(\"$\", \"\")}\n                />\n              </Grid>\n            </Grid>\n          );\n        }\n      )}\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { InputFieldInterface, CurveParamsInterface } from \"./types\";\nimport InputParamBig from \"./InputParamBig\";\nimport { parameterDescriptions } from \"./parametersDescriptions\";\n\nexport default function SimulationInputParams({\n  curveParams,\n  setCurveParams\n}: {\n  curveParams: CurveParamsInterface;\n  setCurveParams(newCurveParams: any): void;\n}) {\n  const [d0, setD0] = useState(3e6); // Initial raise, d0 (DAI)\n\n  useEffect(() => {\n    setD0(curveParams.d0);\n  }, [curveParams]);\n\n  function setParentCurveParams() {\n    setCurveParams((params: CurveParamsInterface) => ({\n      ...params,\n      d0\n    }));\n  }\n\n  const inputFields: InputFieldInterface[] = [\n    {\n      label: `${parameterDescriptions.d0.name}`,\n      description: parameterDescriptions.d0.text,\n      value: d0,\n      setter: setD0,\n      min: 0.1e6,\n      max: 10e6,\n      step: 0.1e6,\n      suffix: \"M\",\n      format: (n: number) => `$${+(n * 1e-6).toFixed(1)}M`,\n      toText: (n: number) => String(+(n * 1e-6).toFixed(1)),\n      toNum: (n: string) => Math.floor(parseFloat(n) * 1e6)\n    }\n  ];\n\n  return (\n    <InputParamBig\n      inputFields={inputFields}\n      onChangeCommited={setParentCurveParams}\n    />\n  );\n}\n","/**\n * Returns an equally spaced array of numbers `from`, `to` with `steps`.\n */\nexport function linspace({\n  from = 0,\n  to,\n  steps\n}: {\n  from?: number;\n  to: number;\n  steps: number;\n}) {\n  const arr = [];\n  for (let x = from; x <= to; x += (to - from) / steps) arr.push(x);\n  return arr;\n}\n\n/**\n * Returns a uniform distribution of `num` ticks\n */\nexport function getLinspaceTicks(data: number[], num: number) {\n  const desiredPoints = [];\n  const step = (data[data.length - 1] - data[0]) / num;\n  for (let x = data[0]; x < data[data.length - 1]; x += step) {\n    desiredPoints.push(x);\n  }\n  if (desiredPoints.length < num + 1) desiredPoints.push(data[data.length - 1]);\n\n  return desiredPoints;\n}\n\n/**\n * Returns the last element of an array\n */\nexport function getLast(a: number[]) {\n  return a[a.length - 1];\n}\n\n/**\n * Returns the average of an array\n */\nexport function getAvg(a: number[]) {\n  return a.reduce((t, c) => t + Math.abs(c), 0) / a.length;\n}\n\n/**\n * Waits `ms` miliseconds and resolves\n */\nexport function pause(ms: number) {\n  return new Promise(r => setTimeout(r, ms));\n}\n\n/**\n * Parse the units of big numbers\n */\nexport function getUnits(\n  biggestNum: number\n): { scaling: number; unit: string } {\n  const [scaling, unit] =\n    // Billion\n    biggestNum > 0.5e9\n      ? [1e9, \"B\"]\n      : // Million\n      biggestNum > 0.5e6\n      ? [1e6, \"M\"]\n      : // 1 thousand\n      biggestNum > 0.5e3\n      ? [1e3, \"K\"]\n      : // No scale\n        [1, \"\"];\n  return { scaling, unit };\n}\n","/**\n * Computes the initial params given the \"user friendly\" params:\n * - Initial raise, `d0` (DAI)\n * - fraction allocated to reserve, `theta`\n * - Hatch sale price, `p0` (DAI / token)\n * - Return factor, `returnF`\n */\nexport function getInitialParams({\n  d0,\n  theta,\n  p0,\n  p1\n}: {\n  d0: number;\n  theta: number;\n  p0: number;\n  p1: number;\n}) {\n  const k = p1 / p0 / (1 - theta); // Invariant power kappa (.)\n  const R0 = (1 - theta) * d0; // Initial reserve (DAI)\n  const S0 = d0 / p0; // initial supply of tokens (token)\n  const V0 = S0 ** k / R0; // invariant coef\n  return { k, R0, S0, V0 };\n}\n\nexport function getR({ S, V0, k }: { S: number; V0: number; k: number }) {\n  return S ** k / V0;\n}\n\nexport function getS({ R, V0, k }: { R: number; V0: number; k: number }) {\n  return (V0 * R) ** (1 / k);\n}\n\n// compute the price if all that supply is burned\nexport function getMinPrice({\n  S,\n  H,\n  V0,\n  k\n}: {\n  S: number;\n  H: number;\n  V0: number;\n  k: number;\n}) {\n  if (S === H) {\n    const myR = getR({ S, V0, k });\n    const myP = getPriceR({ R: myR, V0, k }); // numerical precision make complex numbers just suppress it\n    return Math.abs(myP);\n  } else {\n    // compute the reserve if all that supply is burned\n    const minR = getR({ S: S - H, V0, k });\n    return getPriceR({ R: minR, V0, k });\n  }\n}\n\n/**\n * Computes the price at a specific reserve `R`\n */\nexport function getPriceR({ R, V0, k }: { R: number; V0: number; k: number }) {\n  return (k * R ** ((k - 1) / k)) / V0 ** (1 / k);\n}\n\n/**\n * Compute slippage at a point `R`, given a `deltaR`\n */\nexport function getSlippage({\n  R,\n  deltaR,\n  V0,\n  k\n}: {\n  R: number;\n  deltaR: number;\n  V0: number;\n  k: number;\n}) {\n  const S = (V0 * R) ** (1 / k);\n  const deltaS = (V0 * (R + deltaR)) ** (1 / k) - S;\n  const realizedPrice = deltaR / deltaS;\n  const spotPrice = getPriceR({ R, V0, k });\n  return Math.abs(realizedPrice - spotPrice) / spotPrice;\n}\n\n// Price walk utils\n\n/**\n * Get deltaR for a given price growth factor\n */\nexport function getDeltaR_priceGrowth({\n  R,\n  k,\n  priceGrowth\n}: {\n  R: number;\n  k: number;\n  priceGrowth: number;\n}) {\n  return -R + (priceGrowth * R ** (1 - 1 / k)) ** (k / (-1 + k));\n}\n\n/**\n * Computes a tx distribution using a normal distribution,\n * Given a sum of tx value and a number of transactions\n *\n * Demo: https://codepen.io/anon/pen/mNqJjv?editors=0010#0\n * Very quick: < 10ms for 10000 txs\n */\nexport function getTxDistribution({\n  sum,\n  num,\n  spread\n}: {\n  sum: number;\n  num: number;\n  spread: number;\n}) {\n  const mean = sum / num;\n  const off = mean * spread;\n  const x: number[] = [];\n  for (let i = 0; i < num; i++) {\n    x.push(randn_bm(mean - off, mean + off));\n  }\n  return x;\n}\n\nexport function vest_tokens({\n  week,\n  H, // unvested_hatch_tokens\n  halflife,\n  cliff\n}: {\n  week: number;\n  H: number;\n  halflife: number;\n  cliff: number;\n}) {\n  // check cliff\n  if (week < cliff) {\n    return 0;\n  } else {\n    // rate of release given half - life\n    const vest_fraction = 0.5 ** (1 / halflife);\n    // number of tokens that vest in this week\n    return H * (1 - vest_fraction);\n  }\n}\n\n// Statistics utils\n\n/**\n * Random variable uniformly distributed\n */\nexport function rv_U(min: number, max: number) {\n  return Math.random() * (max - min) + min;\n}\n\n/**\n * Standard Normal variate using Box-Muller transform.\n * by https://stackoverflow.com/questions/25582882/javascript-math-random-normal-distribution-gaussian-bell-curve/36481059#36481059\n */\nfunction randn_bm(min: number, max: number) {\n  var u = 0,\n    v = 0;\n  while (u === 0) u = Math.random(); //Converting [0,1) to (0,1)\n  while (v === 0) v = Math.random();\n  let num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);\n\n  num = num / 10.0 + 0.5; // Translate to 0 -> 1\n  if (num > 1 || num < 0) num = randn_bm(min, max); // resample between 0 and 1 if out of range\n  num *= max - min; // Stretch to fill range\n  num += min; // offset to min\n  return num;\n}\n\n// Array utils\n\nexport function getMedian(arr: number[]) {\n  const mid = Math.floor(arr.length / 2);\n  const nums = [...arr].sort((a, b) => a - b);\n  return arr.length % 2 !== 0 ? nums[mid] : (nums[mid - 1] + nums[mid]) / 2;\n}\n\nexport function getSum(arr: number[]) {\n  return arr.reduce((a, b) => a + b, 0);\n}\n","import React from \"react\";\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Legend,\n  ReferenceLine,\n  ReferenceDot,\n  ReferenceArea,\n  ResponsiveContainer,\n  Tooltip,\n} from \"recharts\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { getLinspaceTicks, getUnits } from \"./utils\";\nimport { getInitialParams, getPriceR } from \"./math\";\nimport { useTheme } from \"@material-ui/styles\";\n\nconst isAnimationActive = false;\nconst keyHorizontal = \"x\";\nconst keyVertical = \"Supply (tokens) / Collateral (DAI)\";\n\n// Do to transparency and color merging issues\n// these colors are handpicked to look the closest to the theme colors\nconst referenceLineColor = \"#b7c1cb\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    tooltip: {\n      border: \"1px solid #313d47\",\n      backgroundColor: \"#384b59\",\n      padding: theme.spacing(1),\n      color: \"#c7ccd2\",\n    },\n  })\n);\n\nfunction SupplyVsDemandChart({\n  theta,\n  d0,\n  p0,\n  p1,\n}: {\n  theta: number;\n  d0: number;\n  p0: number;\n  p1: number;\n}) {\n  // d0      - Initial raise, d0 (DAI)\n  // theta   - fraction allocated to reserve (.)\n  // p0      - Hatch sale Price p0 (DAI / token)\n  // returnF - Return factor (.)\n  // wFee    - friction coefficient (.)\n\n  // Hatch parameters\n  const {\n    k, // Invariant power kappa (.)\n    R0, // Initial reserve (DAI)\n    S0, // initial supply of tokens (token)\n    V0, // invariant coef\n  } = getInitialParams({\n    d0,\n    theta,\n    p0,\n    p1,\n  });\n  const R0_round = Math.round(R0);\n  const S_of_R = (R: number) => S0 * (R / R0_round) ** (1 / k);\n\n  // Function setup\n  const f = S_of_R;\n  const from = 0;\n  const to = 4 * R0_round;\n  const steps = 100 + 1; // Add 1 for the ticks to match\n  const step = Math.round((to - from) / (steps - 1));\n\n  /**\n   * Prettify the result converting 1000000 to 1M\n   */\n  const biggest = Math.max(to, f(to));\n  const { scaling, unit } = getUnits(biggest);\n\n  const data = [];\n  for (let i = 0; i < steps; i++) {\n    const x = Math.round(from + step * i);\n    data.push({\n      [keyHorizontal]: x,\n      [keyVertical]: f(x),\n    });\n  }\n\n  // Chart components\n\n  const theme: any = useTheme();\n  const classes = useStyles();\n\n  const formatter = (n: number) =>\n    (+(n / scaling).toPrecision(2)).toLocaleString();\n\n  function renderColorfulLegendText(value: string) {\n    return <span style={{ color: \"#00A52D\" }}>{value}</span>;\n  }\n\n  function ReferenceLabel(props: any) {\n    const { textAnchor, viewBox } = props;\n    return (\n      <text\n        x={viewBox.x + viewBox.width / 4 + 10}\n        y={viewBox.y + 20}\n        fill={referenceLineColor}\n        textAnchor={textAnchor}\n      >\n        Initial Token Supply\n      </text>\n    );\n  }\n\n  function CustomTooltip({ active, payload, label }: any) {\n    if (active) {\n      const supply = payload[0].value;\n      const reserve = label;\n      const price = getPriceR({ R: reserve, V0, k });\n      const toolTipData: string[][] = [\n        [\"Supply\", formatter(supply) + unit, \"tokens\"],\n        [\"Collateral\", formatter(reserve) + unit, \"DAI\"],\n        [\"Price\", price.toFixed(2), \"DAI/token\"],\n      ];\n      return (\n        <div className={classes.tooltip}>\n          <table>\n            <tbody>\n              {toolTipData.map(([name, value, _unit]) => (\n                <tr key={name}>\n                  <td>{name}</td>\n                  <td>{value}</td>\n                  <td>{_unit}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      );\n    } else return null;\n  }\n\n  return (\n    <ResponsiveContainer debounce={1}>\n      <AreaChart\n        width={0}\n        height={400}\n        data={data}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid\n          vertical={false}\n          stroke={theme.palette.text.secondary}\n          strokeOpacity={0.13}\n        />\n        <XAxis\n          interval={24}\n          dataKey={keyHorizontal}\n          tickFormatter={formatter}\n          unit={unit}\n          tick={{ fill: \"#00E046\" }}\n          stroke={\"#00E046\"}\n        />\n        <YAxis\n          interval={\"preserveStartEnd\"}\n          ticks={getLinspaceTicks(\n            data.map((d) => d[keyVertical]),\n            3\n          )}\n          tickFormatter={formatter}\n          unit={unit}\n          tick={{ fill: \"#00E046\" }}\n          stroke={\"#00E046\"}\n          domain={[0, f(to)]}\n        />\n        <Tooltip content={<CustomTooltip />} />\n        <Area\n          isAnimationActive={isAnimationActive}\n          type=\"monotone\"\n          dataKey={keyVertical}\n          stroke={theme.palette.primary.main}\n          fill={theme.palette.primary.main}\n          fillOpacity={0.3}\n          strokeWidth={2}\n        />\n        {/* Necessary because ReferenceDot types do not allow \"label\" k */}\n        <ReferenceLine\n          x={R0_round}\n          y={f(R0_round)}\n          stroke={\"transparent\"}\n          strokeDasharray=\"9 0\"\n          label={<ReferenceLabel />}\n        />\n        <ReferenceDot\n          x={R0_round}\n          y={f(R0_round)}\n          r={6}\n          fill={theme.palette.primary.main}\n          stroke={2}\n        />\n\n        <Legend formatter={renderColorfulLegendText} />\n      </AreaChart>\n    </ResponsiveContainer>\n  );\n}\n\nexport default SupplyVsDemandChart;\n","import React from \"react\";\nimport \"./dotsLoader.css\";\n\nexport default function DotsLoader() {\n  return (\n    <div className=\"spinner\">\n      <div className=\"bounce1\" />\n      <div className=\"bounce2\" />\n      <div className=\"bounce3\" />\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextWithPopover from \"./TextWithPopover\";\nimport DotsLoader from \"./DotsLoader\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      margin: theme.spacing(6, 0, 3),\n    },\n    lightBulb: {\n      verticalAlign: \"middle\",\n      marginRight: theme.spacing(1),\n    },\n    leftContainer: {\n      color: theme.palette.text.secondary,\n    },\n    centerContainer: {\n      // color: blackColor\n    },\n    listBoxContainer: {\n      \"& > div:not(:last-child)\": {\n        marginBottom: \"12px\",\n        borderBottom: \"1px solid #006a13\",\n      },\n    },\n    listBox: {\n      paddingBottom: \"12px\",\n      \"& > div\": {\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& p\": {\n          marginBottom: 0,\n        },\n      },\n      \"& > div:not(:last-child)\": {\n        paddingRight: \"12px\",\n      },\n    },\n    value: {\n      color: \"#00E046\",\n    },\n\n    valueFooter: {\n      color: \"#00A52D\",\n      fontSize: \"80%\",\n    },\n  })\n);\n\nexport default function ResultParams({\n  resultFields,\n  simulationDuration,\n}: {\n  resultFields: {\n    label: string;\n    description: string;\n    value: number | string;\n    valueFooter?: string;\n  }[];\n  simulationDuration: number;\n}) {\n  /**\n   * When resizing the window the chart animation looks very bad\n   * Keep the animation active only during the initial animation time,\n   * but afterwards, deactivate to prevent the re-size ugly effect\n   */\n  const [isAnimationActive, setIsAnimationActive] = useState(\n    process.env.NODE_ENV !== \"development\"\n  );\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setIsAnimationActive(false);\n    }, simulationDuration);\n    return () => {\n      clearTimeout(timeout);\n    };\n  });\n\n  const classes = useStyles();\n\n  return (\n    <div className={classes.listBoxContainer}>\n      {resultFields.map(({ label, description, value, valueFooter }) => (\n        <Grid key={label} container spacing={0} className={classes.listBox}>\n          <Grid item xs={8} className={classes.leftContainer}>\n            <TextWithPopover content={label} popoverText={description} />\n          </Grid>\n\n          <Grid item xs={4} className={classes.centerContainer}>\n            {isAnimationActive ? (\n              <DotsLoader />\n            ) : (\n              <div>\n                <Typography className={classes.value}>{value}</Typography>\n                {valueFooter && (\n                  <Typography className={classes.valueFooter}>\n                    {valueFooter}\n                  </Typography>\n                )}\n              </div>\n            )}\n          </Grid>\n        </Grid>\n      ))}\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Legend,\n  ReferenceLine,\n  ResponsiveContainer,\n  Tooltip,\n} from \"recharts\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { useTheme } from \"@material-ui/styles\";\nimport { linspace, getUnits } from \"./utils\";\n\nconst keyHorizontal = \"x\";\nconst keyVerticalLeft = \"Price (DAI/token)\";\nconst keyVerticalLeft2 = \"Floor price (DAI/token)\";\nconst keyVerticalRight = \"Total funds raised (DAI)\";\nconst p1LineText = \"Post-Hatch price\";\nconst p0LineText = \"Hatch price\";\n\n// Do to transparency and color merging issues\n// these colors are handpicked to look the closest to the theme colors\nconst yLeftColor = \"#53c388\";\nconst yRightColor = \"#4090d9\";\nconst referenceLineColor = \"#b7c1cb\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    tooltip: {\n      border: \"1px solid #313d47\",\n      backgroundColor: \"#384b59\",\n      padding: theme.spacing(1),\n      color: \"#c7ccd2\",\n    },\n  })\n);\n\nfunction PriceSimulationChart({\n  priceTimeseries,\n  totalFundsRaisedTimeseries,\n  floorpriceTimeseries,\n  simulationDuration,\n  p0,\n  p1,\n}: {\n  priceTimeseries: number[];\n  totalFundsRaisedTimeseries: number[];\n  floorpriceTimeseries: number[];\n  simulationDuration: number;\n  p0: number;\n  p1: number;\n}) {\n  // d0      - Initial raise, d0 (DAI)\n  // theta   - fraction allocated to reserve (.)\n  // p0      - Hatch sale Price p0 (DAI / token)\n  // returnF - Return factor (.)\n  // wFee    - friction coefficient (.)\n\n  const data = [];\n  for (let t = 0; t < priceTimeseries.length; t++) {\n    data.push({\n      [keyHorizontal]: t,\n      [keyVerticalLeft]: priceTimeseries[t] || 0,\n      [keyVerticalLeft2]: floorpriceTimeseries[t] || 0,\n      [keyVerticalRight]: totalFundsRaisedTimeseries[t] || 0,\n    });\n  }\n\n  /**\n   * When resizing the window the chart animation looks very bad\n   * Keep the animation active only during the initial animation time,\n   * but afterwards, deactivate to prevent the re-size ugly effect\n   */\n  const [isAnimationActive, setIsAnimationActive] = useState(\n    process.env.NODE_ENV !== \"development\"\n  );\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setIsAnimationActive(false);\n    }, simulationDuration + 100);\n    return () => {\n      clearTimeout(timeout);\n    };\n  });\n\n  // Compute chart related math\n\n  const totalFundsMin = totalFundsRaisedTimeseries[0];\n  const totalFundsMax = totalFundsRaisedTimeseries.slice(-1)[0];\n  const totalFundsRange = totalFundsMax - totalFundsMin;\n\n  const daiFormatter = (n: number) => (+n.toFixed(2)).toLocaleString();\n  const { scaling, unit } = getUnits(totalFundsMax);\n  const fundsFormatter = (n: number) => (+n.toPrecision(3)).toLocaleString();\n  const fundsFormatterShort = (n: number) =>\n    (+(n / scaling).toPrecision(3)).toLocaleString();\n\n  // Load styles\n\n  const theme: any = useTheme();\n  const classes = useStyles();\n\n  // Chart components\n\n  function renderColorfulLegendText(value: string) {\n    return <span style={{ color: theme.palette.text.secondary }}>{value}</span>;\n  }\n\n  function ReferenceLabel(props: any) {\n    const { textAnchor, viewBox, text, fill } = props;\n    return (\n      <text\n        x={viewBox.x + 4}\n        y={viewBox.y + 17}\n        fill={referenceLineColor}\n        textAnchor={textAnchor}\n      >\n        {text}\n      </text>\n    );\n  }\n\n  function CustomTooltip({ active, payload, label }: any) {\n    if (active) {\n      const price = payload[0].value;\n      const floor = payload[1].value;\n      const funds = payload[2].value;\n      const weekNum = label;\n      const toolTipData: string[][] = [\n        [\"Price\", daiFormatter(price), \"DAI/tk\"],\n        [\"Floor P.\", daiFormatter(floor), \"DAI/tk\"],\n        [\"Funds R.\", fundsFormatterShort(funds) + unit, \"DAI\"],\n        [\"Week\", weekNum, \"\"],\n      ];\n\n      return (\n        <div className={classes.tooltip}>\n          <table>\n            <tbody>\n              {toolTipData.map(([name, value, unit]) => (\n                <tr key={name}>\n                  <td>{name}</td>\n                  <td>{value}</td>\n                  <td>{unit}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      );\n    } else return null;\n  }\n\n  return (\n    <ResponsiveContainer debounce={1}>\n      <AreaChart\n        width={0}\n        height={400}\n        data={data}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid\n          vertical={false}\n          stroke={theme.palette.text.secondary}\n          strokeOpacity={0.13}\n        />\n        <XAxis\n          dataKey={keyHorizontal}\n          tick={{ fill: yLeftColor }}\n          stroke={theme.palette.text.secondary}\n          ticks={[\n            ...linspace({\n              to: priceTimeseries.length,\n              steps: 4,\n            }).map(Math.floor),\n            priceTimeseries.length - 1,\n          ]}\n        />\n\n        {/* Price time evolution */}\n        <YAxis\n          yAxisId=\"left\"\n          domain={[0, Math.max(...priceTimeseries, p1 * 1.25)]}\n          tickFormatter={daiFormatter}\n          tick={{ fill: yLeftColor }}\n          stroke={yLeftColor}\n        />\n\n        {/* Capital collected from withdraw fees - AXIS */}\n        <YAxis\n          yAxisId=\"right\"\n          domain={[\n            totalFundsMin.toPrecision(2),\n            +(totalFundsMax + totalFundsRange).toPrecision(2),\n          ]}\n          orientation=\"right\"\n          tickFormatter={fundsFormatter}\n          tick={{ fill: \"#C64EDC\" }}\n          stroke={\"#C64EDC\"}\n        />\n\n        <Tooltip content={<CustomTooltip />} />\n\n        <Area\n          isAnimationActive={isAnimationActive}\n          animationDuration={simulationDuration}\n          yAxisId=\"left\"\n          type=\"monotone\"\n          dataKey={keyVerticalLeft}\n          stroke={theme.palette.primary.main}\n          fill={theme.palette.primary.main}\n          fillOpacity={0.3}\n          strokeWidth={2}\n        />\n        <Area\n          isAnimationActive={isAnimationActive}\n          animationDuration={simulationDuration}\n          yAxisId=\"left\"\n          type=\"monotone\"\n          dataKey={keyVerticalLeft2}\n          stroke={\"#adcd2e\"}\n          fill={\"#adcd2e\"}\n          fillOpacity={0.05}\n          strokeWidth={2}\n        />\n\n        <ReferenceLine\n          y={p0}\n          yAxisId=\"left\"\n          stroke={theme.palette.primary.main}\n          label={<ReferenceLabel text={p0LineText} />}\n        />\n        <ReferenceLine\n          y={p1}\n          yAxisId=\"left\"\n          stroke={theme.palette.primary.main}\n          label={<ReferenceLabel text={p1LineText} />}\n        />\n\n        {/* Capital collected from withdraw fees - AREA */}\n        <Area\n          isAnimationActive={isAnimationActive}\n          animationDuration={simulationDuration}\n          yAxisId=\"right\"\n          type=\"monotone\"\n          dataKey={keyVerticalRight}\n          stroke={\"#C64EDC\"}\n          fill={\"#C64EDC\"}\n          fillOpacity={0.5}\n          strokeWidth={2}\n        />\n\n        {/* <ReferenceLine\n          x={R0}\n          stroke=\"#90a4ae\"\n          strokeDasharray=\"6 3\"\n          label={<ReferenceLabel />}\n        /> */}\n        <Legend formatter={renderColorfulLegendText} />\n      </AreaChart>\n    </ResponsiveContainer>\n  );\n}\n\nexport default PriceSimulationChart;\n","const low_u = 0.97;\nconst high_u = 1.07;\nconst dump = 0.75;\n\nexport const u_min_t = [\n  1,\n  0.8,\n  0.8,\n  0.9,\n  0.9,\n  0.8,\n  0.6,\n  0.5,\n  0.8,\n  0.9,\n  0.9,\n  low_u,\n  low_u,\n  low_u,\n  0.8,\n  low_u,\n  low_u,\n  low_u,\n  dump,\n  low_u,\n  low_u,\n  low_u,\n  dump,\n  low_u,\n  low_u,\n  low_u,\n  dump,\n  low_u,\n  low_u,\n  low_u,\n  dump,\n  low_u,\n  low_u,\n  low_u,\n  dump,\n  low_u,\n  low_u,\n  low_u,\n  dump,\n  low_u,\n  low_u,\n  low_u,\n  low_u,\n  low_u,\n  low_u,\n  dump,\n  low_u,\n  low_u,\n  low_u,\n  low_u,\n  low_u,\n  0.97\n];\n\nexport const u_max_t = [\n  3,\n  1.5,\n  1.01,\n  1.04,\n  1.1,\n  1.15,\n  1.15,\n  1.15,\n  1.1,\n  1.1,\n  1.2,\n  1.15,\n  high_u,\n  high_u,\n  1.3,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  1.3,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  1.2,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  1.4,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  high_u,\n  1.04\n];\n","import React, { useState, useEffect, useMemo } from \"react\";\n// Material UI\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\n// Components\nimport Header from \"./Header\";\nimport CurveDesignInputParams from \"./CurveDesignInputParams\";\nimport SimulationInputParams from \"./SimulationInputParams\";\nimport SupplyVsDemandChart from \"./SupplyVsDemandChart\";\nimport ResultParams from \"./ResultParams\";\nimport PriceSimulationChart from \"./PriceSimulationChart\";\nimport HelpText from \"./HelpText\";\n// Text content\nimport {\n  parameterDescriptions,\n  simulationParameterDescriptions,\n  resultParameterDescriptions,\n  supplyVsDemandChartDescription,\n  simulationChartDescription,\n} from \"./parametersDescriptions\";\n// Utils\nimport { getLast, getAvg, pause } from \"./utils\";\nimport {\n  getInitialParams,\n  getPriceR,\n  getMinPrice,\n  getS,\n  vest_tokens,\n  getR,\n  getSlippage,\n  getTxDistribution,\n  getDeltaR_priceGrowth,\n  rv_U,\n  getMedian,\n  getSum,\n} from \"./math\";\nimport { throttle } from \"lodash\";\n// Data\nimport { u_min_t, u_max_t } from \"./u_values\";\n// General styles\nimport \"./app.css\";\n\nconst headerOffset = 10;\nconst simulationDuration = 4000;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    mainContainer: {\n      \"& > div:not(:last-child)\": {\n        paddingBottom: theme.spacing(3),\n      },\n      \"& > div\": {\n        \"& > div\": {\n          paddingTop: \"0 !important\",\n        },\n      },\n      paddingBottom: theme.spacing(9),\n    },\n    simulationContainer: {\n      minHeight: \"442px\",\n    },\n    paper: {\n      width: \"100%\",\n      height: \"100%\",\n      minHeight: 310,\n      backgroundColor: \"#004C07\",\n      borderRadius: \"15px\",\n    },\n    box: {\n      padding: theme.spacing(3, 3),\n    },\n    boxButton: {\n      padding: theme.spacing(3, 3),\n    },\n    boxHeader: {\n      padding: theme.spacing(3, 3),\n      height: theme.spacing(headerOffset),\n      display: \"flex\",\n      alignItems: \"center\",\n      borderBottom: \"1px solid #006a13\",\n    },\n    boxHeaderWithoutBoder: {\n      padding: theme.spacing(3, 3),\n      height: theme.spacing(headerOffset),\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    boxHeaderTitle: {\n      color: \"#00E046\",\n    },\n    boxBorderBottom: {\n      borderBottom: \"1px solid #006a13\",\n    },\n    initialRaise: {\n      justifyContent: \"space-between\",\n    },\n    boxChart: {\n      width: \"100%\",\n      height: \"100%\",\n      minHeight: 310,\n      maxHeight: 350,\n      padding: theme.spacing(3, 3),\n      // Correct the chart excessive margins\n      paddingRight: \"5px\",\n      paddingLeft: \"5px\",\n    },\n    boxPlaceholder: {\n      padding: theme.spacing(3, 3),\n      display: \"flex\",\n      height: \"100%\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: theme.palette.text.secondary,\n      opacity: 0.4,\n    },\n    header: {\n      backgroundColor: \"#0b1216\",\n      color: \"#f8f8f8\",\n      textAlign: \"center\",\n      padding: theme.spacing(3, 0, 6 + headerOffset),\n      marginBottom: -theme.spacing(headerOffset),\n    },\n    button: {\n      // background: \"linear-gradient(290deg, #2ad179, #4ab47c)\", // Green gradient\n      background: \"#00E046\", // Darker Green gradient\n      // background: \"linear-gradient(290deg, #1880e0, #3873d8)\", // blue gradient\n      color: \"#003C00\",\n      borderRadius: \"30px\",\n      textTransform: \"initial\",\n    },\n    // Descriptions\n    descriptionContainer: {\n      \"& > div:not(:last-child)\": {\n        paddingBottom: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        borderBottom: \"1px solid #3f5463\",\n      },\n      \"& td\": {\n        verticalAlign: \"top\",\n        padding: theme.spacing(0.5),\n      },\n    },\n    descriptionTitle: {\n      padding: theme.spacing(0.5),\n    },\n    descriptionBody: {\n      color: \"#dbdfe4\",\n    },\n    descriptionPadding: {\n      padding: theme.spacing(0.5),\n    },\n    hatchRaiseBox: {\n      backgroundColor: \"#004C07\",\n      borderRadius: \"15px\",\n    },\n    d0Container: {\n      \"& > div\": {\n        padding: \"0 12px 0 0 !important\",\n        display: \"flex\",\n        alignItems: \"center\",\n      },\n    },\n    d0Number: {\n      padding: \"0 !important\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    d0Slidder: {\n      padding: \"0 12px 0 0 !important\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  })\n);\n\nexport default function App() {\n  const [curveParams, setCurveParams] = useState({\n    theta: 0.35, // fraction allocated to reserve (.)\n    p0: 0.1, // Hatch sale price p0 (DAI / token)\n    p1: 0.3, // Return factor (.)\n    wFee: 0.05, // friction coefficient (.)\n    vHalflife: 17, // Vesting half life (weeks)\n    d0: 3e6, // Initial raise, d0 (DAI)\n  });\n\n  const { d0, theta, p0, p1, wFee, vHalflife } = curveParams;\n\n  /**\n   * Throttle the curve update to prevent the expensive chart\n   * to re-render too often\n   */\n  const setCurveParamsThrottle = useMemo(\n    () => throttle(setCurveParams, 250),\n    []\n  );\n\n  // Simulation results\n  const {\n    k, // Invariant power kappa (.)\n    R0, // Initial reserve (DAI)\n    S0, // initial supply of tokens (token)\n    V0, // invariant coef\n  } = getInitialParams({\n    d0,\n    theta,\n    p0,\n    p1,\n  });\n\n  const [priceTimeseries, setPriceTimeseries] = useState([0]);\n  const [withdrawFeeTimeseries, setWithdrawFeeTimeseries] = useState([0]);\n  const [floorpriceTimeseries, setFloorpriceTimeseries] = useState([0]);\n  const [totalReserve, setTotalReserve] = useState(R0);\n  const [withdrawCount, setWithdrawCount] = useState(0);\n  const [avgSlippage, setAvgSlippage] = useState(0);\n  const [avgTxSize, setAvgTxSize] = useState(0);\n  // Simulation state variables\n  const [simulationActive, setSimulationActive] = useState(false);\n  const [simulationRunning, setSimulationRunning] = useState(false);\n\n  useEffect(() => {\n    setSimulationActive(false);\n  }, [curveParams]);\n\n  // #### TEST: Immediate simulation\n\n  async function startSimulation() {\n    // If there's a simulation already active, clear it\n    clearSimulation();\n    await pause(0);\n\n    // Start simulation by setting it to active\n    setSimulationActive(true);\n  }\n\n  function clearSimulation() {\n    // Stop simulation\n    setSimulationActive(false);\n    // Clear simulation variables\n    setWithdrawCount(0);\n    setPriceTimeseries([0]);\n    setWithdrawFeeTimeseries([0]);\n    setAvgSlippage(0);\n  }\n\n  useEffect(() => {\n    let canContinueSimulation = true;\n\n    async function simulateRandomDelta() {\n      const R_t: number[] = [R0];\n      const S_t: number[] = [S0];\n      const p_t: number[] = [getPriceR({ R: R0, V0, k })];\n      const wFee_t: number[] = [0];\n      const slippage_t: number[] = [];\n      const avgTxSize_t: number[] = [];\n\n      // hatchers tokens = S0[section added by Z]\n      const H_t: number[] = [S0]; // total hatcher tokens not vested\n      const floorprice_t: number[] = []; // initially the price is the floor as all tokens are hatcher tokens\n\n      // Random walk\n      const numSteps = 52;\n      const u_min = 0.97;\n      const u_max = 1.04;\n      const tx_spread = 10;\n      // vesting(should this be exposed in the app ?)\n      const cliff = 8; // weeks before vesting starts ~2 months\n      // const halflife = 52; // 26 weeks, half life is ~6 months\n      // percentage of the hatch tokens which vest per week(since that is our timescale in the sim)\n\n      // numSteps = 52 take 8ms to run\n      setSimulationRunning(true);\n      for (let t = 0; t < numSteps; t++) {\n        const txsWeek = rv_U(100, 40 * t + 100);\n\n        const R = getLast(R_t);\n        const S = getLast(S_t);\n        const H = getLast(H_t);\n\n        let R_next: number = 0,\n          S_next: number = 0,\n          H_next: number = 0,\n          price_next: number = 0,\n          txsWithdraw: number[] = [0],\n          floorprice_next: number = 1,\n          slippage: number = 0;\n        // Run the value compution again if the price goes below the floor price\n\n        /**\n         * Since the values u_min and u_max are predefined, it's possible that\n         * the price becomes less than the floor price. This cannot happen.\n         * So the next loop has 10 opportunities to find a price greater than\n         * the floor price. The for loop is used to prevent a possible infinite\n         * loop if a `while` loop was used.\n         */\n        for (let i = 0; i < 20 && price_next < floorprice_next * 1.05; i++) {\n          // enforce the effects of the unvested tokens not being burnable\n          let u_lower: number, u_upper: number;\n          // if (H > S) {\n          //   u_lower = 1;\n          // } else {\n          //   // compute the reserve if all that supply is burned\n          //   const R_ratio = getR({ S: S - H, V0, k }) / R;\n          //   u_lower = Math.max(1 - R_ratio, u_min);\n          // }\n          // let priceGrowth = rv_U(u_lower, u_max);\n\n          u_lower = u_min_t[t];\n          u_upper = u_max_t[t];\n\n          if (i > 15) {\n            u_lower = 1.02;\n            u_upper = u_upper + 1.04;\n          }\n\n          const priceGrowth = rv_U(u_lower, u_upper);\n\n          const deltaR = getDeltaR_priceGrowth({ R, k, priceGrowth });\n          R_next = R + deltaR;\n\n          const txs = getTxDistribution({\n            sum: deltaR,\n            num: txsWeek,\n            spread: tx_spread,\n          });\n          // Compute slippage\n          const slippage_txs = txs.map((txR) =>\n            getSlippage({ R, deltaR: txR, V0, k })\n          );\n          slippage = getMedian(slippage_txs);\n\n          txsWithdraw = txs.filter((tx) => tx < 0);\n\n          // Vest\n          const delta_H = vest_tokens({\n            week: t,\n            H,\n            halflife: vHalflife,\n            cliff,\n          });\n          H_next = H - delta_H;\n\n          // find floor price\n          S_next = getS({ R, V0, k });\n          floorprice_next = getMinPrice({\n            S: S_next,\n            H: S_next - H_next,\n            V0,\n            k,\n          });\n\n          price_next = getPriceR({ R: R_next, V0, k });\n        }\n\n        const _avgTxSize = getMedian(txsWithdraw);\n        const wFees = -wFee * getSum(txsWithdraw);\n\n        R_t.push(R_next);\n        S_t.push(S_next);\n        H_t.push(H_next);\n        p_t.push(price_next);\n        slippage_t.push(slippage);\n        avgTxSize_t.push(_avgTxSize);\n        wFee_t.push(getLast(wFee_t) + wFees);\n\n        floorprice_t.push(floorprice_next);\n        setWithdrawCount((c) => c + txsWithdraw.length);\n\n        // Stop the simulation if it's no longer active\n        if (!simulationActive || !canContinueSimulation) break;\n      }\n\n      // floorprice_t is missing one data point\n      floorprice_t[floorprice_t.length] = floorprice_t[floorprice_t.length - 1];\n\n      setPriceTimeseries(p_t);\n      setWithdrawFeeTimeseries(wFee_t);\n      setFloorpriceTimeseries(floorprice_t);\n      setAvgSlippage(getAvg(slippage_t));\n      setAvgTxSize(getAvg(avgTxSize_t.filter((n) => !isNaN(n))));\n      setTotalReserve(getLast(R_t));\n\n      setSimulationRunning(false);\n    }\n\n    if (simulationActive) simulateRandomDelta();\n    // Return an \"unsubscribe\" function that halts the run\n    return () => {\n      canContinueSimulation = false;\n    };\n  }, [simulationActive]);\n\n  // End results computed for chart visualization\n  const initialHatchFunds = d0 * theta;\n  const totalFundsRaisedTimeseries = withdrawFeeTimeseries.map(\n    (x) => x + initialHatchFunds\n  );\n\n  const totalInitialHatchFunds = Math.round(d0 * theta);\n  const totalExitTributes = Math.round(getLast(withdrawFeeTimeseries));\n  const totalFunds = totalInitialHatchFunds + totalExitTributes;\n  const formatFunds = (n: number) => (+n.toPrecision(3)).toLocaleString();\n\n  const resultFields = [\n    {\n      label: resultParameterDescriptions.totalReserve.name,\n      description: resultParameterDescriptions.totalReserve.text,\n      value: (+totalReserve.toPrecision(3)).toLocaleString() + \" DAI\",\n    },\n    {\n      label: resultParameterDescriptions.slippage.name,\n      description: resultParameterDescriptions.slippage.text,\n      value: +(100 * avgSlippage).toFixed(3) + \" %\",\n      valueFooter: `Avg tx size ${Math.round(avgTxSize).toLocaleString()} DAI`,\n    },\n    {\n      label: resultParameterDescriptions.initialHatchFunds.name,\n      description: resultParameterDescriptions.initialHatchFunds.text,\n      value: formatFunds(totalInitialHatchFunds) + \" DAI\",\n    },\n    {\n      label: resultParameterDescriptions.exitTributes.name,\n      description: resultParameterDescriptions.exitTributes.text,\n      value: formatFunds(totalExitTributes) + \" DAI\",\n      valueFooter: `From ${withdrawCount} exit txs`,\n    },\n    {\n      label: resultParameterDescriptions.totalRaised.name,\n      description: resultParameterDescriptions.totalRaised.text,\n      value: formatFunds(totalFunds) + \" DAI\",\n    },\n  ];\n\n  const classes = useStyles();\n\n  return (\n    <>\n      <Container fixed className={classes.mainContainer}>\n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={12} md={6} lg={4}>\n            <Paper className={classes.paper}>\n              <Box className={classes.boxHeader}>\n                <Typography className={classes.boxHeaderTitle} variant=\"h6\">\n                  Curve Design\n                </Typography>\n                <HelpText\n                  title={\"Parameters description\"}\n                  table={[\n                    parameterDescriptions.theta,\n                    parameterDescriptions.p0,\n                    parameterDescriptions.p1,\n                    parameterDescriptions.wFee,\n                    parameterDescriptions.vHalflife,\n                  ]}\n                />\n              </Box>\n\n              <Box className={classes.box}>\n                <CurveDesignInputParams\n                  curveParams={curveParams}\n                  setCurveParams={setCurveParamsThrottle}\n                />\n              </Box>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} sm={12} md={6} lg={8}>\n            <Paper className={classes.paper}>\n              <Box className={classes.boxHeader}>\n                <Typography className={classes.boxHeaderTitle} variant=\"h6\">\n                  Preview\n                </Typography>\n                <HelpText body={supplyVsDemandChartDescription} />\n              </Box>\n\n              <Box className={classes.boxChart}>\n                <SupplyVsDemandChart theta={theta} d0={d0} p0={p0} p1={p1} />\n              </Box>\n            </Paper>\n          </Grid>\n        </Grid>\n\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <Paper className={classes.hatchRaiseBox}>\n              <Box className={`${classes.box} ${classes.boxBorderBottom}`}>\n                <SimulationInputParams\n                  curveParams={curveParams}\n                  setCurveParams={setCurveParamsThrottle}\n                />\n              </Box>\n\n              <Box className={classes.boxHeaderWithoutBoder}>\n                <Grid\n                  container\n                  direction=\"row\"\n                  justify=\"center\"\n                  alignItems=\"center\"\n                >\n                  <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    onClick={startSimulation}\n                    disabled={simulationRunning}\n                  >\n                    <Typography variant=\"body1\">Run simulation</Typography>\n                  </Button>\n                </Grid>\n              </Box>\n            </Paper>\n          </Grid>\n        </Grid>\n\n        <Grid container spacing={3} className={classes.simulationContainer}>\n          {simulationActive ? (\n            <>\n              <Grid item xs={12} sm={12} md={6} lg={8}>\n                <Paper className={classes.paper}>\n                  <Box className={classes.boxHeader}>\n                    <Typography className={classes.boxHeaderTitle} variant=\"h6\">\n                      Simulation\n                    </Typography>\n                    <HelpText\n                      body={simulationChartDescription}\n                      table={Object.values(simulationParameterDescriptions)}\n                    />\n                  </Box>\n\n                  <Box className={classes.boxChart}>\n                    <PriceSimulationChart\n                      priceTimeseries={priceTimeseries}\n                      floorpriceTimeseries={floorpriceTimeseries}\n                      totalFundsRaisedTimeseries={totalFundsRaisedTimeseries}\n                      simulationDuration={simulationDuration}\n                      p0={p0}\n                      p1={p1}\n                    />\n                  </Box>\n                </Paper>\n              </Grid>\n\n              <Grid item xs={12} sm={12} md={6} lg={4}>\n                <Paper className={classes.paper}>\n                  <Box className={classes.boxHeader}>\n                    <Typography className={classes.boxHeaderTitle} variant=\"h6\">\n                      Results\n                    </Typography>\n                    <HelpText\n                      title={\"Result parameters description\"}\n                      table={Object.values(resultParameterDescriptions)}\n                    />\n                  </Box>\n\n                  <Box className={classes.box}>\n                    <ResultParams\n                      resultFields={resultFields}\n                      simulationDuration={simulationDuration}\n                    />\n                  </Box>\n                </Paper>\n              </Grid>\n            </>\n          ) : (\n            <Grid item xs={12}>\n              <Paper className={classes.paper}>\n                <Box className={classes.boxPlaceholder}>\n                  <Typography variant=\"h6\">\n                    Run a simulation to see results\n                  </Typography>\n                </Box>\n              </Paper>\n            </Grid>\n          )}\n        </Grid>\n      </Container>\n    </>\n  );\n}\n","import red from \"@material-ui/core/colors/red\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: \"#2ecd79\"\n    },\n    secondary: {\n      main: \"#116be0\",\n      light: \"#0f8bff\",\n      dark: \"#116be0\"\n    },\n    error: {\n      main: red.A400\n    },\n    background: {\n      default: \"#fff\",\n      paper: \"#293640\"\n    },\n    text: {\n      primary: \"#fff\",\n      secondary: \"#9aa3ad\"\n    }\n  },\n  typography: {\n    h6: {\n      fontWeight: 400\n    }\n  }\n});\n\nconsole.log(theme);\n\nexport default theme;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport App from './App';\nimport theme from './theme';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n    <CssBaseline />\n    <App />\n  </ThemeProvider>,\n  document.querySelector('#root'),\n);\n"],"sourceRoot":""}